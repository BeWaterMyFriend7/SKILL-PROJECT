# 软件管理平台需求分析评审文档

## 评审概述
本文档基于原始需求分析文档进行评审，针对需求中的不明确、不完整、交互存在问题和歧义的地方进行了澄清和完善。

## 主要评审调整内容

### 1. 软件分类边界明确化
**评审问题**：软件分类的具体边界如何定义？开源软件中的自主软件如何区分？

**调整内容**：
- **自主软件定义**：公司拥有版权的软件，包括完全自研软件和基于开源软件二次开发的软件
- **开源软件定义**：使用第三方开源许可证的软件，公司不拥有版权，仅作为使用者
- **商业软件定义**：公司采购的商业化软件产品，具有明确的商业许可协议

### 2. 外部跳转安全性加强
**评审问题**：组件类软件的外部系统跳转是否需要安全验证？

**调整内容**：
- 实施URL白名单验证机制
- 系统维护可信外部系统白名单
- 只允许跳转到白名单内的外部系统
- 非白名单URL需要管理员审批后才能添加

### 3. 用户评价机制确定
**评审问题**：用户评价功能是否需要审核机制？

**调整内容**：
- 采用发布即显示机制
- 用户提交评价后立即在前端显示
- 后台保留评价内容，管理员可进行事后管理
- 如有违规内容，管理员可进行删除或隐藏处理

### 4. 许可证管理功能完善
**评审问题**：软件许可证到期提醒如何配置？

**调整内容**：
- 支持手动配置到期时间
- 支持上传许可证文件，系统自动解析到期时间
- 系统根据到期时间自动发送提醒通知
- 提前30天、7天、1天进行分级提醒

### 5. 统计计算方式优化
**评审问题**：统计分析功能是否需要实时计算？

**调整内容**：
- 采用定时批量计算模式
- 基础统计数据每小时更新一次
- 复杂分析报告每日凌晨生成
- 实时数据仅限关键指标监控

## 评审后的完整需求

### 需求背景
1、为了便于对公司使用的全部软件（商业软件、开源软件、自主软件）进行统一管理，需要建立统一的软件管理平台，增强对软件的管控和规范化管理
2、建立软件管理平台的另外一个原因是提升用户软件查找、使用软件的效率，提供完整的软件档案信息
3、通过多级权限管理和详细统计分析，实现精细化的软件资源管理和使用监控
4、支持产品类软件和组件类软件的差异化管理和数据模型，满足不同类型软件的管理需求

### 需求要点
1、提供软件管理列表，统一展示公司使用的各类软件，支持对相关软件进行检索、筛选、查看基本信息，区分产品类和组件类软件
2、提供软件详情页面，提供软件的完整档案信息，包括基础信息、版本管理、许可证信息、使用统计、用户评价、相关文档等，兼容产品类和组件类软件的差异化管理
3、实现多级权限管理，支持超级管理员、部门管理员、普通用户等不同权限级别
4、提供详细的统计分析功能，包括用户行为分析、软件使用趋势、部门使用统计等
5、支持软件二级分类管理：商业软件、开源软件、自主软件作为一级分类，每类下包含产品类和组件类作为二级分类

### 软件分类定义
#### 一级分类
- **商业软件**：公司采购的商业化软件产品，具有明确的商业许可协议
- **开源软件**：使用第三方开源许可证的软件，公司不拥有版权，仅作为使用者
- **自主软件**：公司拥有版权的软件，包括完全自研软件和基于开源软件二次开发的软件

#### 二级分类
每个一级分类下均包含：
- **产品类软件**：可独立部署使用的软件，如飞书、Office等
- **组件类软件**：不可独立部署，需要集成使用的软件组件，如log4j、Spring Boot等

### 数据模型差异
- **产品类软件**：
  - 标识方式：使用软件名称作为唯一标识
  - 下载方式：在当前平台提供直接下载功能
  - 部署方式：支持独立安装部署

- **组件类软件**：
  - 标识方式：使用坐标（如Maven坐标：groupId:artifactId:version）作为唯一标识
  - 下载方式：提供外部系统下载链接，通过白名单验证后跳转到其他系统下载
  - 集成方式：需要在开发项目中集成使用

### 需求详细描述
#### 软件管理列表
- 描述：
  - 提供软件管理列表，统一展示公司使用的各类软件
  - 支持对相关软件进行检索、筛选、查看基本信息
  - 支持按用户权限级别显示不同的操作功能
- 涉及页面情况： 
  - 管理列表展示：卡片式及列表式两种展示形式，支持切换
  - 列表展示信息：软件名称/组件坐标、版本、软件类型（商业软件、开源软件、自主软件）、软件分类（产品类/组件类）、功能类型、开源协议、许可证状态、管理状态、使用频次、创建时间、更新时间等
  - 分类显示：
    - 产品类软件：显示软件名称、支持直接下载按钮
    - 组件类软件：显示组件坐标、显示"跳转下载"按钮链接到外部系统（白名单验证）
  - 列表搜索栏：
    - 支持软件名称关键词搜索、组件坐标搜索、功能类型关键词搜索、开源协议关键词搜索
    - 支持软件类型、功能类型、管理状态、许可证状态、使用频次、创建时间、更新时间等进行筛选
  - 权限控制：
    - 普通用户：查看和搜索软件，可查看基础信息
    - 部门管理员：可管理部门范围内软件，可编辑软件信息
    - 超级管理员：可管理所有软件，具有增删改查全部权限

#### 软件详情页面
- 描述：点击列表中的某一个软件，进入该页面查看软件的完整档案信息
- 涉及页面情况：
  - 基础信息区：
    - 产品类软件：软件名称、类型、开源协议、功能简介、软件截图、使用范围、功能分类、许可证信息、管理员信息
    - 组件类软件：组件坐标、类型、开源协议、功能简介、使用范围、功能分类、许可证信息、管理员信息
  - 版本管理区：
    - 产品类软件：软件版本列表、各版本下载链接（平台内下载）、介质描述、版本发布说明、兼容性信息
    - 组件类软件：组件版本列表、各版本外部下载链接（白名单验证后跳转）、版本发布说明、依赖信息、兼容性信息
  - 许可证管理区：
    - 许可证类型、到期时间、许可证文件上传
    - 支持手动配置到期时间和上传许可证文件自动解析
    - 到期提醒：提前30天、7天、1天分级提醒
  - 使用统计区：下载次数、使用频次、用户分布、使用趋势图表（定时更新）
  - 文档资源区：使用手册、API文档、安装指南、常见问题、相关文档
  - 用户互动区：用户评价（发布即显示）、使用心得、问题反馈、推荐指数
  - 权限控制：
    - 普通用户：
      - 产品类软件：可查看所有公开信息，可下载软件，可提交评价和反馈
      - 组件类软件：可查看所有公开信息，可跳转外部下载（白名单验证），可提交评价和反馈
    - 部门管理员：可编辑软件信息，可上传新版本，可管理用户评价
    - 超级管理员：具有所有操作权限，可删除软件，可管理所有用户权限

#### 权限管理系统
- 描述：实现多级权限管理，确保软件管理的安全性和规范性
- 功能要求：
  - 用户管理：用户注册、认证、权限分配
  - 角色管理：超级管理员、部门管理员、普通用户角色定义和权限配置
  - 部门管理：支持按部门划分软件管理范围
  - 权限控制：基于角色的访问控制（RBAC），细粒度权限管理

#### 统计分析系统
- 描述：提供详细的软件使用分析和统计功能
- 功能要求：
  - 用户行为分析：软件搜索行为、下载行为、使用时长分析
  - 软件使用趋势：软件使用量变化趋势、热门软件排行
  - 部门使用统计：各部门软件使用情况、软件分布统计
  - 软件健康度监控：许可证到期提醒、版本更新提醒
  - 报表生成：定期生成使用报告、支持导出功能
  - 计算方式：基础统计数据每小时更新，复杂分析报告每日生成

#### 外部链接管理系统
- 描述：管理组件类软件的外部下载链接，确保跳转安全性
- 功能要求：
  - 白名单管理：维护可信外部系统白名单
  - URL验证：所有外部链接必须通过白名单验证
  - 审批流程：新增外部系统需要管理员审批
  - 安全日志：记录所有外部跳转行为

## 非功能性需求
### 性能要求
- 并发要求：支持500+用户同时在线访问，列表查询响应时间<2秒
- 可用性要求：系统可用性99.9%，支持7x24小时服务
- 数据一致性要求：软件信息更新实时生效，下载计数准确统计

### 可观测要求：
- 监控要求：系统性能监控、错误日志监控、用户访问监控
- 统计分析要求：定时批量计算，基础数据每小时更新，复杂报告每日生成
- 告警要求：系统异常告警、许可证到期告警、存储空间告警

### 安全要求：
- 数据安全：敏感信息加密存储、访问日志记录
- 权限安全：严格的权限验证、防止越权访问
- 传输安全：HTTPS加密传输、文件下载安全验证
- 外部链接安全：白名单验证、审批流程、安全日志记录

### 数据规模分析与技术要求：
- 预期数据规模：软件数量1000+，用户数量1000+，版本数量5000+
- 数据模型要求：
  - 支持产品类和组件类软件的差异化数据模型
  - 产品类：基于软件名称标识，支持文件存储和下载
  - 组件类：基于坐标标识，支持外部链接管理（白名单验证）
- 搜索要求：支持软件名称搜索、组件坐标搜索、全文搜索、模糊搜索、高级筛选
- 存储要求：支持大文件存储、文件版本管理
- 扩展性要求：支持水平扩展、微服务架构设计

## 评审结论
经过需求评审，明确了软件分类边界、外部跳转安全机制、用户评价审核机制、许可证管理方式和统计计算模式，需求更加清晰和完善，可以进入下一阶段的技术方案设计。